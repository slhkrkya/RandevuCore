<div class="speaker-view-container">
  
  <!-- Main Speaker Video -->
  <div class="main-speaker-area">
    <div class="main-video-container">
      <video *ngIf="getActiveSpeakerStream() && isParticipantVideoVisible(getActiveSpeaker()!)"
             #mainVideo
             [srcObject]="getActiveSpeakerStream()"
             autoplay
             playsinline
             [muted]="getActiveSpeaker()?.userId === currentUserId"
             class="main-video">
      </video>
      
      <!-- Placeholder when no video -->
      <div *ngIf="!getActiveSpeakerStream() || !isParticipantVideoVisible(getActiveSpeaker()!)"
           class="main-video-placeholder"
           [class]="getActiveSpeaker() ? getParticipantBackgroundColor(getActiveSpeaker()!) : 'bg-gray-500'">
        <div class="placeholder-content">
          <div class="participant-initials">
            {{ getActiveSpeaker() ? getParticipantInitials(getActiveSpeaker()!) : '?' }}
          </div>
          <div class="participant-name">
            {{ getActiveSpeaker() ? getParticipantDisplayName(getActiveSpeaker()!) : 'No Speaker' }}
          </div>
        </div>
      </div>
      
      <!-- Speaker Info Overlay -->
      <div class="speaker-info-overlay" *ngIf="getActiveSpeaker()">
        <div class="speaker-name">
          {{ getParticipantDisplayName(getActiveSpeaker()!) }}
          <span *ngIf="getActiveSpeaker()!.isHost" class="host-indicator">ðŸ‘‘</span>
        </div>
        
        <!-- Status Indicators -->
        <div class="status-indicators">
          <div class="status-indicator"
               [class.muted]="getActiveSpeaker()!.isMuted"
               [class.unmuted]="!getActiveSpeaker()!.isMuted"
               [title]="getActiveSpeaker()!.isMuted ? 'Muted' : 'Unmuted'">
          </div>
          
          <div class="status-indicator"
               [class.video-on]="getActiveSpeaker()!.isVideoOn"
               [class.video-off]="!getActiveSpeaker()!.isVideoOn"
               [title]="getActiveSpeaker()!.isVideoOn ? 'Camera On' : 'Camera Off'">
          </div>
          
          <div *ngIf="getActiveSpeaker()!.isScreenSharing" 
               class="status-indicator screen-sharing"
               title="Screen Sharing">
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Other Participants Thumbnails -->
  <div class="participants-thumbnails" *ngIf="getOtherParticipants().length > 0">
    <div *ngFor="let participant of getOtherParticipants()" 
         class="participant-thumbnail">
      
      <!-- Video Stream -->
      <video *ngIf="isParticipantVideoVisible(participant) && (participant.userId === currentUserId ? localStream : remoteStreams.get(participant.userId))"
             [srcObject]="participant.userId === currentUserId ? localStream : remoteStreams.get(participant.userId)"
             autoplay
             playsinline
             [muted]="participant.userId === currentUserId"
             class="thumbnail-video">
      </video>
      
      <!-- Placeholder when no video -->
      <div *ngIf="!isParticipantVideoVisible(participant) || !(participant.userId === currentUserId ? localStream : remoteStreams.get(participant.userId))"
           class="thumbnail-placeholder"
           [class]="getParticipantBackgroundColor(participant)">
        <div class="thumbnail-initials">
          {{ getParticipantInitials(participant) }}
        </div>
      </div>
      
      <!-- Participant Name -->
      <div class="thumbnail-name">
        {{ getParticipantDisplayName(participant) }}
      </div>
      
      <!-- Status Indicators -->
      <div class="thumbnail-status">
        <div class="status-dot"
             [class.muted]="participant.isMuted"
             [class.unmuted]="!participant.isMuted">
        </div>
        <div class="status-dot"
             [class.video-on]="participant.isVideoOn"
             [class.video-off]="!participant.isVideoOn">
        </div>
      </div>
    </div>
  </div>
  
  <!-- Empty State -->
  <div *ngIf="participants.length === 0" class="empty-state">
    <div class="empty-content">
      <span class="material-symbols-outlined">people</span>
      <h3>No participants</h3>
      <p>Waiting for others to join...</p>
    </div>
  </div>
  
</div>
