<div class="flex h-screen w-full bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 text-white overflow-hidden">
  <!-- Main Content Area -->
  <div class="flex-1 flex flex-col relative transition-all duration-300"
       [class.mr-80]="showParticipantsPanel || showChatPanel">
    
    <!-- Meeting Content -->
    <div class="flex-1 relative">
      
      <!-- Video Grid View -->
      <div *ngIf="activeView === 'grid'" class="h-full w-full">
        <app-video-grid 
          [currentUserId]="currentUserId"
          [localStream]="localStream"
          [remoteStreams]="remoteStreams"
          [meetingState]="meetingState">
        </app-video-grid>
      </div>

      <!-- Speaker View -->
      <div *ngIf="activeView === 'speaker'" class="h-full w-full">
        <app-speaker-view 
          [currentUserId]="currentUserId"
          [localStream]="localStream"
          [remoteStreams]="remoteStreams"
          [meetingState]="meetingState">
        </app-speaker-view>
      </div>

      <!-- Whiteboard View -->
      <div *ngIf="activeView === 'whiteboard'" class="h-full w-full">
        <app-whiteboard 
          [isActive]="meetingState.isWhiteboardActive"
          [isHost]="isHost"
          [roomKey]="roomKey">
        </app-whiteboard>
      </div>

    </div>

    <!-- Meeting Controls -->
    <app-meeting-controls
      [meetingState]="meetingState"
      [isHost]="isHost"
      [participantsCount]="participants.length"
      [showParticipantsPanel]="showParticipantsPanel"
      [showChatPanel]="showChatPanel"
      [showWhiteboardPanel]="showWhiteboardPanel"
      [activeView]="activeView"
      [isMuteToggling]="isMuteToggling"
      [isVideoToggling]="isVideoToggling"
      [isScreenShareToggling]="isScreenShareToggling"
      [meetingDuration]="meetingDuration"
      (toggleMute)="toggleMute()"
      (toggleVideo)="toggleVideo()"
      (toggleScreenShare)="toggleScreenShare()"
      (toggleParticipantsPanel)="toggleParticipantsPanel()"
      (toggleChatPanel)="toggleChatPanel()"
      (toggleWhiteboardPanel)="toggleWhiteboardPanel()"
      (setActiveView)="setActiveView($event)"
      (toggleFullscreen)="toggleFullscreen()"
      (endMeeting)="endMeeting()">
    </app-meeting-controls>

  </div>

  <!-- Participants Panel -->
  <div class="fixed top-0 right-0 h-full w-80 bg-white/95 dark:bg-gray-800/95 backdrop-blur-md shadow-2xl transform transition-transform duration-300 z-50 border-l border-gray-200 dark:border-gray-700"
       [class.translate-x-full]="!showParticipantsPanel"
       [class.translate-x-0]="showParticipantsPanel">
    <app-participants-panel
      [currentUserId]="currentUserId"
      [isHost]="isHost"
      (grantPermission)="grantPermission($event.userId, $event.permission)"
      (removeParticipant)="removeParticipant($event)"
      (close)="toggleParticipantsPanel()">
    </app-participants-panel>
  </div>

  <!-- Chat Panel -->
  <div class="fixed top-0 right-0 h-full w-80 bg-white/95 dark:bg-gray-800/95 backdrop-blur-md shadow-2xl transform transition-transform duration-300 z-50 border-l border-gray-200 dark:border-gray-700"
       [class.translate-x-full]="!showChatPanel"
       [class.translate-x-0]="showChatPanel">
    <app-chat-panel
      [roomKey]="roomKey"
      [currentUserId]="currentUserId"
      [currentUserName]="currentUserName"
      (close)="toggleChatPanel()">
    </app-chat-panel>
  </div>

  <!-- Connection Status -->
  <div class="absolute top-20 left-4 z-30">
    <div class="flex items-center space-x-2 bg-black/50 px-3 py-2 rounded-lg">
      <div class="w-2 h-2 rounded-full" 
           [class.bg-green-500]="connected"
           [class.bg-red-500]="!connected">
      </div>
      <span class="text-sm">{{ connected ? 'Bağlı' : 'Bağlanıyor...' }}</span>
    </div>
  </div>


</div>